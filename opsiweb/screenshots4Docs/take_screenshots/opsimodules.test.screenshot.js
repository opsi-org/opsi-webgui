const { test } = require('@playwright/test')
const { callStoryId } = require('../../uib-components/.utils/playwright/pw-story-call')
const en = require('../../uib-components/locale/en.json')
const de = require('../../uib-components/locale/de.json')
test('OPSI Modules', async ({ page }) => {
  await callStoryId(page, 'view-v-settings', 'v-settings')
  await page.click('.nav-tabs .nav-link:not(.active)')
  await (new Promise(resolve => setTimeout(resolve, 1000)))
  const component = await page.locator('[data-testid="VSettings"]')
  await page.evaluate((val) => { document.querySelector('.localspecific').innerHTML = val }, en['form.general'])
  await page.evaluate((val) => { document.querySelector('.opsispecific').innerHTML = val }, en['form.opsi'])
  await page.evaluate((val) => { document.querySelector('.modules').innerHTML = val }, en['form.modules.available'])
  await component.screenshot({ path: './screenshots/en/opsi-webgui_opsimodules.png' })
  await page.evaluate((val) => { document.querySelector('.localspecific').innerHTML = val }, de['form.general'])
  await page.evaluate((val) => { document.querySelector('.opsispecific').innerHTML = val }, de['form.opsi'])
  await page.evaluate((val) => { document.querySelector('.modules').innerHTML = val }, de['form.modules.available'])
  await component.screenshot({ path: './screenshots/de/opsi-webgui_opsimodules.png' })
})
