const { test } = require('@playwright/test')
const { callStoryId } = require('../../uib-components/.utils/playwright/pw-story-call')
const en = require('../../uib-components/locale/en.json')
const de = require('../../uib-components/locale/de.json')
test('Products', async ({ page }) => {
  await callStoryId(page, 'view-v-products', 'v-products')
  const component = await page.locator('[data-testid="VProducts"]')
  await (new Promise(resolve => setTimeout(resolve, 1000)))
  await page.evaluate((val) => { document.querySelector('.tableheader_title').innerHTML = val }, en['title.products'])
  await page.evaluate((val) => { document.getElementById('treeselect-Depots').innerHTML = val }, en['title.depots'])
  await page.evaluate((val) => { document.getElementById('treeselect-HostGroups').innerHTML = val }, en['treeselect.clientGroups'])
  await page.evaluate((val) => { document.getElementById('treeselect-HostGroups').innerHTML = val }, en['treeselect.prodGroups'])
  await component.evaluate(() => { document.querySelector('.count').innerHTML = '0/3' })
  await component.evaluate(() => { document.querySelector('.localboot').innerHTML = 'Localboot(3)' })
  await component.evaluate(() => { document.querySelector('.netboot').innerHTML = 'Netboot(7)' })
  await component.evaluate(() => { document.querySelector('.filter').placeholder = 'Filter ID' })
  await component.screenshot({ path: './screenshots/en/opsiweb_products.png' })
  await page.evaluate((val) => { document.querySelector('.nav-title').innerHTML = val }, de['title.products'])
  await page.evaluate((val) => { document.querySelector('.tableheader_hostgroup').innerHTML = val }, de['treeselect.clientGroups'])
  await page.evaluate((val) => { document.querySelector('.tableheader_productgroup').innerHTML = val }, de['treeselect.prodGroups'])
  await component.screenshot({ path: './screenshots/de/opsiweb_products.png' })
})
