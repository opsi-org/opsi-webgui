const { test } = require('@playwright/test')
const { callStoryId } = require('../../uib-components/.utils/playwright/pw-story-call')
const en = require('../../uib-components/locale/opsi-webgui_en.jsonjson')
const de = require('../../uib-components/locale/opsi-webgui_de.jsonjson')

test('Selections', async ({ page }) => {
  await callStoryId(page, 'modal-m-selections-all', 'm-selections-all')
  await page.setViewportSize({ width: 750, height: 400 })
  await page.click('[data-testid="MSelectionsAll"] .btn')
  await (new Promise(resolve => setTimeout(resolve, 1000)))
  const component = page.locator('[data-testid="MSelectionsModal"] .modal-content')
  await (new Promise(resolve => setTimeout(resolve, 1000)))
  await page.evaluate((val) => { document.querySelector('.modal-title').innerHTML = val }, en['title.selectedElements'])
  await page.evaluate((val) => { document.querySelector('.depots').innerHTML = val }, en['title.depots'])
  await page.evaluate((val) => { document.querySelector('.clients').innerHTML = val }, en['title.clients'])
  await component.screenshot({ path: './screenshots/en/opsi-webgui_selections.png' })
  await page.evaluate((val) => { document.querySelector('.modal-title').innerHTML = val }, de['title.selectedElements'])
  await component.screenshot({ path: './screenshots/de/opsi-webgui_selections.png' })
})
