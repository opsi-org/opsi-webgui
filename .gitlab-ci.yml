image: node:latest

stages:
  - test
  - build

test:jtest:
  stage: test
  script: |
    cd opsiweb
    npm install
    npm test
  artifacts:
    reports:
      cobertura: opsiweb/coverage/clover.xml

build:static-app:
  stage: build
  script: |
    cd opsiweb
    npm install
    npm run build
    npm run generate
  artifacts:
    name: 'opsi-webgui'
    paths:
      - opsiweb/dist
    expire_in: 2 day

