project:
  name: opsi-webgui
  version: &project_version 4.2.4
  description: opsi webgui
  homepage: http://www.opsi.org
  licenses:
    - license: AGPL-3.0
  maintainer: uib GmbH <info@uib.de>

package:
  name: opsi-webgui
  type: binary
  architecture: all
  depends:
    - opsiconfd (>= 4.2.0.253)
  source_script: |
    mkdir -p "${DST}/rootfs/var/lib/opsiconfd/addons"
    cp -a "${SRC}/backend/addon/webgui" "${DST}/rootfs/var/lib/opsiconfd/addons/webgui"
    mkdir -p "${DST}/rootfs/var/lib/opsiconfd/addons/webgui/data"
    ls -la "${SRC}/opsiweb/dist/"
    cp -a "${SRC}"/opsiweb/dist/* "${DST}/rootfs/var/lib/opsiconfd/addons/webgui/data/app"
  postinst_script:
    - echo "OPSI webgui folder '/var/lib/opsiconfd/addons/webgui'"
    - exit 0

pull-binaries:
  - name: opsi-webgui
    server-type: binaryindex
    destination: .
    extract: true
    post-script: []
    os: linux
    architecture: x64
    version: *project_version
    branch: development
    server-url: http://binaryindex.uib.gmbh
